<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>주문 테스트 페이지</title>
</head>
<body>
    <h1>가구 쇼핑몰 주문 테스트</h1>
    
    <button onclick="orderTest()">주문하기 (POST 요청 보내기)</button>

    <script>
        async function orderTest() {
            // 보낼 가짜 주문 데이터
            const orderData = {
                member_id: 1,
                recipient_name: "홍길동",
                recipient_phone: "010-1234-5678",
                shipping_address: "서울시 강남구 테헤란로",
                payment_method: "CARD",
                items: [
                    { "product_id": 1, "quantity": 1 },
                    { "product_id": 2, "quantity": 1 }
                ]
            };

            try {
                // 브라우저가 직접 서버로 POST 요청을 보냄 (Thunder Client 역할 대체)
                const response = await fetch('/api/orders', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderData)
                });

                const result = await response.json();
                
                if (response.ok) {
                    alert("성공! 주문번호: " + result.order_id);
                    console.log(result);
                } else {
                    alert("실패: " + result.message);
                }
            } catch (error) {
                alert("에러 발생: " + error);
            }
        }
    </script>
</body>
</html>